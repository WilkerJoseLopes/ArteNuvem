{% extends "base.html" %}
{% block content %}
<h1>Painel de Administração</h1>

<section class="admin-section">
    <h2>Categorias</h2>
    <form method="post" class="form">
        <input type="hidden" name="action" value="create_categoria">
        <label>Nova categoria</label>
        <input type="text" name="nome" placeholder="Nome da categoria" required>
        <button type="submit">Adicionar</button>
    </form>

    <h3>Existentes</h3>
    <ul class="lista-simples">
        {% for c in categorias %}
            <li>{{ c.nome }}</li>
        {% else %}
            <li>Sem categorias definidas.</li>
        {% endfor %}
    </ul>
</section>

<section class="admin-section">
    <h2>Criar nova exposição</h2>
    <form method="post" class="form">
        <input type="hidden" name="action" value="create_exposicao">
        <label>Nome da Exposição</label>
        <input type="text" name="nome" placeholder="Ex: Exposição de Maio" required>
        <label>Mês</label>
        <input type="text" name="mes" placeholder="Ex: Maio 2025" required>
        <button type="submit">Criar Exposição</button>
    </form>
</section>

<section class="admin-section">
    <h2>Exposições existentes</h2>

    {% for e in exposicoes %}
    <div class="card" style="margin-bottom: 1rem; padding: 1rem;">
        <form method="post" class="form">
            <input type="hidden" name="action" value="update_exposicao">
            <input type="hidden" name="exposicao_id" value="{{ e.id }}">

            <label>Nome</label>
            <input type="text" name="nome" value="{{ e.nome }}">

            <label>Mês</label>
            <input type="text" name="mes" value="{{ e.mes }}">

            <button type="submit">Guardar alterações</button>
        </form>

        <form method="post" style="margin-top: 0.5rem;">
            <input type="hidden" name="action" value="delete_exposicao">
            <input type="hidden" name="exposicao_id" value="{{ e.id }}">
            <button type="submit" style="background:#b91c1c;">Apagar exposição</button>
        </form>
    </div>
    {% else %}
        <p>Sem exposições registadas.</p>
    {% endfor %}
</section>
{% endblock %}
