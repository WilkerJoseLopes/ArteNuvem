{% extends "base.html" %}
{% block content %}
<h1>In√≠cio</h1>

<section class="section-fotos">
    <h2>Fotos</h2>
    <div class="grid">
        {% for img in fotos %}
        <div class="card">
            <a href="{{ url_for('imagem_detalhe', imagem_id=img.id) }}">
                <img src="{{ img.caminho_armazenamento }}" alt="{{ img.titulo }}">
            </a>
            <div class="card-body">
                <h3>{{ img.titulo }}</h3>
                <p>ID: {{ img.id }}</p>
                <p>Autor ID: {{ img.id_utilizador }}</p>
                {% if img.categoria_texto %}
                    <span class="badge">{{ img.categoria_texto }}</span>
                {% endif %}
                {% if current_user and (current_user.id == img.id_utilizador or current_user.email == ADMIN_EMAIL) %}
                <form method="post" action="{{ url_for('apagar_imagem', imagem_id=img.id) }}" onsubmit="return confirm('Apagar esta imagem?');">
                    <button type="submit">Apagar</button>
                </form>
                {% endif %}
            </div>
        </div>
        {% else %}
        <p>Sem fotos ainda.</p>
        {% endfor %}
    </div>
</section>

<section class="section-others">
    <h2>Todas as imagens</h2>
    <div class="grid">
        {% for img in imagens %}
        <div class="card">
            <a href="{{ url_for('imagem_detalhe', imagem_id=img.id) }}">
                <img src="{{ img.caminho_armazenamento }}" alt="{{ img.titulo }}">
            </a>
            <div class="card-body">
                <h3>{{ img.titulo }}</h3>
                <p>ID: {{ img.id }}</p>
                <p>Autor ID: {{ img.id_utilizador }}</p>
                {% if img.categoria_texto %}
                    <span class="badge">{{ img.categoria_texto }}</span>
                {% endif %}
                {% if current_user and (current_user.id == img.id_utilizador or current_user.email == ADMIN_EMAIL) %}
                <form method="post" action="{{ url_for('apagar_imagem', imagem_id=img.id) }}" onsubmit="return confirm('Apagar esta imagem?');">
                    <button type="submit">Apagar</button>
                </form>
                {% endif %}
            </div>
        </div>
        {% else %}
        <p>Sem imagens para mostrar.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
